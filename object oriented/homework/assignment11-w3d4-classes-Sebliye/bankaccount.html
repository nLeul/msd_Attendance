<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bank account</title>
    <script>
    "use strict";

/**
 * A Bank Account class
 * 
 * Provides the basic functionality that every account should have
 */
class Account {
    /**
     * Constructor for creating a new Account object
     * 
     * @param {number} number the number for this account
     */
    constructor(number) {
        this._number = number; // the account number
        this._balance = 0.0;
    }

    /**
     * Getter for the 'private' number field
     * 
     * @returns {number} the account number
     */
    getNumber() {
        return this._number;
    }

    /**
     * Accessor for the 'private' balance field
     * 
     * @returns {number} balance for this account
     */
    getBalance() {
        return this._balance;
    }

    /**
     * Method to add money into the account
     * 
     * @param {number} amount money to be deposited into the account 
     * @returns {undefined}
     * @throws {RangeError} when amount is less than or equal to zero
     */
    deposit(amount) {
        if (amount <= 0) {
            throw new RangeError("Deposit amount has to be greater than zero");
        }
        this._balance += amount;
    }

    /**
     * Method to take money out of the account
     * 
     * @param {number} amount money to be taken out of the account
     * @returns {undefined}
     * @throws {RangeError} when amount is less than or equal to zero
     * @throws {Error} when the account has insufficient funds (balance)
     */
    withdraw(amount) {
        if (amount <= 0) {
            throw new RangeError("Withdraw amount has to be greater than zero");
        }
        if (amount > this._balance) {
            throw Error("Insufficient funds");
        }
        this._balance -= amount;
    }

    /**
     * @returns {string} representation of this account
     */
    toString() {
        return "Account " + this._number + ": balance " + this._balance;
    }
    endOfMonth(){
        return "";
    }
}
class SavingsAccount extends Account{
    constructor(interest,num){
        super(num);
        this._interest=interest;
    }

    setInterest(inter){
        this._interest=inter;
    }
    getInterst(){
        return this._interest;
    }
    addInterest(){
        this.deposit(this.getBalance()*this.getInterst()/100);
    }
    toString(){
        return super.toString()+" interst:- "+this.getInterst();
    }
    endOfMonth(){
        let bal=this.getBalance();
        this.addInterest();
        return super.endOfMonth()+"Interest added SavingsAccount "+this.getNumber()+"  balance: "+this.getBalance()+"  interest: "+(bal-this.getBalance());
    }
}
// let sav=new SavingsAccount(5,123);
// console.log(sav.toString());
// sav.deposit(1000);
// console.log(sav.toString());
// sav.addInterest();
// console.log(sav.toString());
// sav.setInterest(10);
// sav.addInterest();
// console.log(sav.toString());


class CheckingAccount extends Account{
    constructor(overdraft,num){
        super(num);
        this._overdraft=overdraft;
    }
    setOverDraft(draft){
        this._overdraft=draft;
    }
    getOverDraft(){
        return this._overdraft;
    }
    withdraw(amount){
      let total=this.getBalance()+this.getOverDraft();
      if(this.getBalance()>amount){
         super.withdraw(amount);
      }else if (total>amount){
         let cary=amount-this.getBalance();
        super.withdraw(this.getBalance()); 
        this.setOverDraft(this.getOverDraft()-cary);
    }else{alert("ur balance is low");}
    }
    toString(){
        return super.toString()+"  your overDraft is:- "+this.getOverDraft();
    }
    endOfMonth(){
        if(this.getBalance()<=0){
            return super.endOfMonth()+"Warning, low balance CheckingAccoun "+this.getNumber()+" balance: "+this.getBalance()+"  overdraft limit: "+this.getOverDraft();
        }
    }
}
// let check=new CheckingAccount(50,123);
// console.log(check.toString());
// check.withdraw(253);
// console.log(check.toString());
// check.deposit(100);
// console.log(check.toString());
// check.withdraw(50);
// console.log(check.toString());
// check.withdraw(70);
// console.log(check.toString());

class Bank{
    
    constructor(){
        this.accArr=[];
    }
    //static nextNumber=this.accArr[0].getNumber();
    addAccount(accNumber){
         this.accArr.push(new Account(accNumber));
        return accNumber;
    }
    addSavingsAccount(interest,accNumber){
        let s=new SavingsAccount(interest,accNumber);s.deposit(10);
        this.accArr.push(s);
        return accNumber;
    }
    addCheckingAccount(overdraft,accNumber){
        this.accArr.push(new CheckingAccount(overdraft,accNumber));
        return accNumber;
    }
    closeAccount(number) {
        for(let acc of this.accArr){
            if(acc.getNumber()===number){
               // this.accArr.pop(acc);
               delete acc;
            }
        }
        return this.accArr.length;
    }
    accountReport(){
        let retu="";
        for(let acc of this.accArr){
            retu+=acc.toString()+"\n";
        }
        return retu;
    }
    endOfMonth(){
        let retu="";
        for(let monthE of this.accArr){
            retu+=monthE.endOfMonth()+"\n";
        }
        return retu;
    }
}
// let bank=new Bank();
// console.log(bank.addAccount(123));
// console.log(bank.addSavingsAccount(5,123));
// console.log(bank.addCheckingAccount(60,123));
// //console.log(bank.accountReport());
// //console.log(bank.closeAccount(123));
// //console.log(Bank.nextNumber);
// console.log(bank.endOfMonth());

    </script>

</head>
<body>
    
</body>
</html>